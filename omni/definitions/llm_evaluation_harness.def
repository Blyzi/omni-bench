Bootstrap: docker
From: python:3.10-slim

%post
    # Install system dependencies
    apt-get update
    apt-get install -y --no-install-recommends git
    apt-get -y install build-essential

    git clone --depth 1 https://gitlab.inria.fr/tlasnier/lm-evaluation-harness
    cd lm-evaluation-harness
    pip install --upgrade pip
    pip install -e .
    pip install lm_eval[vllm]
    pip install transformers --upgrade